{% extends "base.html" %}

{% block content %}
    <div style="display: flex; gap: 20px; margin-top: 20px">
      <h1>TODO list</h1>
      <div style="position: relative; float: left; margin-left: auto">
        <a href="{% url "todo_app:task-create" %}" class="btn btn-primary link-to-page">
      Add task
        </a>
      </div>
    </div>
    <br>

        {% for task in task_list %}
          <ul>
            <div style="display: flex; gap: 20px">
              <strong>{{ task.content }}</strong>
              <div>
                {% if task.status %}
                  <strong style="color: green">Done</strong>
                {% else %}
                  <strong style="color: red">Not done</strong>
                {% endif %}
              </div>
              <div style="position: relative; float: left; margin-left: auto">
                    {% if task.status %}
                      <a href="{% url "todo_app:undo-task-status" pk=task.id %}" class="btn btn-secondary">Undo</a>
                    {% else %}
                      <a href="{% url "todo_app:complete-task-status" pk=task.id %}" class="btn btn-success" >Complete</a>
                     {% endif %}
              </div>
            </div>

            <div>
              <p> Created: {{ task.created_at }}
              {% if task.deadline %}
                Deadline: {{ task.deadline }}
              {% endif %}
                </p>
            </div>
            <div>
              Tags:
              {% for tag in task.tags.all %}
                {{ tag.title }}
                {% endfor %}
              <a href="{% url "todo_app:task-update" pk=task.id %}">
                    Update
                </a>
              <a href="{% url "todo_app:task-delete" pk=task.id %}">
                    Delete
                </a>
            </div>
          </ul>
        <br>
        {% endfor %}

{% endblock %}